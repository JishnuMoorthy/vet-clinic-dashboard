import type {
  User,
  AuthResponse,
  DashboardData,
  Pet,
  PetOwner,
  Appointment,
  Invoice,
  InvoiceLineItem,
  InventoryItem,
  PaginatedResponse,
} from "@/types/api";

// ============= Mock Users & Auth =============

interface MockCredential {
  email: string;
  password: string;
  user: User;
}

export const mockStaffList: User[] = [
  {
    id: "mock-admin-001",
    email: "admin@pawscare.com",
    full_name: "Admin User",
    role: "admin",
    phone: "+91-9000000001",
    is_active: true,
    created_at: "2025-01-01T00:00:00Z",
    updated_at: "2025-01-01T00:00:00Z",
  },
  {
    id: "mock-vet-001",
    email: "rajesh.sharma@pawscare.com",
    full_name: "Dr. Rajesh Sharma",
    role: "vet",
    phone: "+91-9000000002",
    specialties: ["Surgery", "Dermatology"],
    is_active: true,
    created_at: "2025-01-01T00:00:00Z",
    updated_at: "2025-01-01T00:00:00Z",
  },
  {
    id: "mock-vet-002",
    email: "priya.nair@pawscare.com",
    full_name: "Dr. Priya Nair",
    role: "vet",
    phone: "+91-9000000004",
    specialties: ["Internal Medicine", "Cardiology"],
    is_active: true,
    created_at: "2025-02-01T00:00:00Z",
    updated_at: "2025-02-01T00:00:00Z",
  },
  {
    id: "mock-staff-001",
    email: "anjali@pawscare.com",
    full_name: "Anjali Patel",
    role: "staff",
    phone: "+91-9000000003",
    is_active: true,
    created_at: "2025-01-15T00:00:00Z",
    updated_at: "2025-01-15T00:00:00Z",
  },
];

const mockCredentials: MockCredential[] = [
  { email: "admin@pawscare.com", password: "Admin@2026!", user: mockStaffList[0] },
  { email: "rajesh.sharma@pawscare.com", password: "Vet@2026!", user: mockStaffList[1] },
  { email: "anjali@pawscare.com", password: "Staff@2026!", user: mockStaffList[3] },
];

export function mockLogin(email: string, password: string): AuthResponse {
  const match = mockCredentials.find(
    (u) => u.email.toLowerCase() === email.toLowerCase() && u.password === password
  );
  if (!match) throw new Error("Invalid email or password");
  return {
    access_token: `mock-token-${match.user.id}-${Date.now()}`,
    token_type: "bearer",
    user: match.user,
  };
}

// ============= Mock Owners =============

export const mockOwners: PetOwner[] = [
  {
    id: "owner-001",
    full_name: "Vikram Mehta",
    email: "vikram@example.com",
    phone: "+91-9876543210",
    address: "42 MG Road, Bangalore",
    pets_count: 2,
    last_visit: "2026-02-10",
    created_at: "2025-03-01T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "owner-002",
    full_name: "Sneha Reddy",
    email: "sneha.r@example.com",
    phone: "+91-9876543211",
    address: "15 Jubilee Hills, Hyderabad",
    pets_count: 1,
    last_visit: "2026-02-08",
    created_at: "2025-04-12T00:00:00Z",
    updated_at: "2026-02-08T00:00:00Z",
  },
  {
    id: "owner-003",
    full_name: "Arjun Kapoor",
    email: "arjun.k@example.com",
    phone: "+91-9876543212",
    address: "78 Bandra West, Mumbai",
    pets_count: 3,
    last_visit: "2026-02-12",
    created_at: "2025-01-20T00:00:00Z",
    updated_at: "2026-02-12T00:00:00Z",
  },
  {
    id: "owner-004",
    full_name: "Meera Joshi",
    email: "meera.j@example.com",
    phone: "+91-9876543213",
    address: "5 Connaught Place, Delhi",
    pets_count: 1,
    last_visit: "2026-01-25",
    created_at: "2025-06-10T00:00:00Z",
    updated_at: "2026-01-25T00:00:00Z",
  },
  {
    id: "owner-005",
    full_name: "Rohit Singh",
    email: "rohit.s@example.com",
    phone: "+91-9876543214",
    address: "22 Park Street, Kolkata",
    pets_count: 2,
    last_visit: "2026-02-11",
    created_at: "2025-05-05T00:00:00Z",
    updated_at: "2026-02-11T00:00:00Z",
  },
];

// ============= Mock Pets =============

export const mockPets: Pet[] = [
  {
    id: "pet-001",
    name: "Bruno",
    species: "Dog",
    breed: "Golden Retriever",
    gender: "Male",
    date_of_birth: "2022-06-15",
    weight: 32,
    microchip_id: "MC-001-2022",
    notes: "Friendly, loves treats",
    status: "active",
    owner_id: "owner-001",
    owner: mockOwners[0],
    created_at: "2025-03-01T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "pet-002",
    name: "Whiskers",
    species: "Cat",
    breed: "Persian",
    gender: "Female",
    date_of_birth: "2023-01-20",
    weight: 4.5,
    status: "active",
    owner_id: "owner-001",
    owner: mockOwners[0],
    created_at: "2025-03-01T00:00:00Z",
    updated_at: "2026-01-15T00:00:00Z",
  },
  {
    id: "pet-003",
    name: "Coco",
    species: "Dog",
    breed: "Labrador",
    gender: "Female",
    date_of_birth: "2021-11-08",
    weight: 28,
    microchip_id: "MC-003-2021",
    status: "active",
    owner_id: "owner-002",
    owner: mockOwners[1],
    created_at: "2025-04-12T00:00:00Z",
    updated_at: "2026-02-08T00:00:00Z",
  },
  {
    id: "pet-004",
    name: "Max",
    species: "Dog",
    breed: "German Shepherd",
    gender: "Male",
    date_of_birth: "2020-03-22",
    weight: 38,
    microchip_id: "MC-004-2020",
    notes: "Needs joint supplements",
    status: "active",
    owner_id: "owner-003",
    owner: mockOwners[2],
    created_at: "2025-01-20T00:00:00Z",
    updated_at: "2026-02-12T00:00:00Z",
  },
  {
    id: "pet-005",
    name: "Nemo",
    species: "Fish",
    breed: "Clownfish",
    gender: "Male",
    status: "active",
    owner_id: "owner-003",
    owner: mockOwners[2],
    created_at: "2025-07-01T00:00:00Z",
    updated_at: "2025-07-01T00:00:00Z",
  },
  {
    id: "pet-006",
    name: "Milo",
    species: "Cat",
    breed: "Siamese",
    gender: "Male",
    date_of_birth: "2024-05-10",
    weight: 3.8,
    status: "active",
    owner_id: "owner-003",
    owner: mockOwners[2],
    created_at: "2025-08-01T00:00:00Z",
    updated_at: "2026-01-20T00:00:00Z",
  },
  {
    id: "pet-007",
    name: "Bella",
    species: "Dog",
    breed: "Beagle",
    gender: "Female",
    date_of_birth: "2023-08-14",
    weight: 12,
    status: "active",
    owner_id: "owner-004",
    owner: mockOwners[3],
    created_at: "2025-06-10T00:00:00Z",
    updated_at: "2026-01-25T00:00:00Z",
  },
  {
    id: "pet-008",
    name: "Rocky",
    species: "Dog",
    breed: "Rottweiler",
    gender: "Male",
    date_of_birth: "2021-02-28",
    weight: 45,
    microchip_id: "MC-008-2021",
    status: "active",
    owner_id: "owner-005",
    owner: mockOwners[4],
    created_at: "2025-05-05T00:00:00Z",
    updated_at: "2026-02-11T00:00:00Z",
  },
  {
    id: "pet-009",
    name: "Luna",
    species: "Cat",
    breed: "Maine Coon",
    gender: "Female",
    date_of_birth: "2024-01-01",
    weight: 6,
    status: "active",
    owner_id: "owner-005",
    owner: mockOwners[4],
    created_at: "2025-05-05T00:00:00Z",
    updated_at: "2026-02-05T00:00:00Z",
  },
];

// ============= Mock Appointments =============

export const mockAppointments: Appointment[] = [
  {
    id: "appt-001",
    pet_id: "pet-001",
    pet: mockPets[0],
    vet_id: "mock-vet-001",
    vet: mockStaffList[1],
    date: "2026-02-13",
    time: "09:00",
    reason: "Annual vaccination",
    status: "scheduled",
    created_at: "2026-02-01T00:00:00Z",
    updated_at: "2026-02-01T00:00:00Z",
  },
  {
    id: "appt-002",
    pet_id: "pet-003",
    pet: mockPets[2],
    vet_id: "mock-vet-002",
    vet: mockStaffList[2],
    date: "2026-02-13",
    time: "10:00",
    reason: "Skin checkup",
    notes: "Follow-up from last visit",
    status: "scheduled",
    created_at: "2026-02-05T00:00:00Z",
    updated_at: "2026-02-05T00:00:00Z",
  },
  {
    id: "appt-003",
    pet_id: "pet-004",
    pet: mockPets[3],
    vet_id: "mock-vet-001",
    vet: mockStaffList[1],
    date: "2026-02-13",
    time: "11:30",
    reason: "Joint pain assessment",
    status: "scheduled",
    created_at: "2026-02-07T00:00:00Z",
    updated_at: "2026-02-07T00:00:00Z",
  },
  {
    id: "appt-004",
    pet_id: "pet-007",
    pet: mockPets[6],
    vet_id: "mock-vet-002",
    vet: mockStaffList[2],
    date: "2026-02-13",
    time: "14:00",
    reason: "Dental cleaning",
    status: "scheduled",
    created_at: "2026-02-08T00:00:00Z",
    updated_at: "2026-02-08T00:00:00Z",
  },
  {
    id: "appt-005",
    pet_id: "pet-008",
    pet: mockPets[7],
    vet_id: "mock-vet-001",
    vet: mockStaffList[1],
    date: "2026-02-13",
    time: "15:30",
    reason: "Post-surgery follow-up",
    status: "scheduled",
    created_at: "2026-02-09T00:00:00Z",
    updated_at: "2026-02-09T00:00:00Z",
  },
  {
    id: "appt-006",
    pet_id: "pet-002",
    pet: mockPets[1],
    vet_id: "mock-vet-001",
    vet: mockStaffList[1],
    date: "2026-02-10",
    time: "09:30",
    reason: "Grooming consultation",
    status: "completed",
    created_at: "2026-02-01T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "appt-007",
    pet_id: "pet-009",
    pet: mockPets[8],
    vet_id: "mock-vet-002",
    vet: mockStaffList[2],
    date: "2026-02-14",
    time: "10:00",
    reason: "General checkup",
    status: "scheduled",
    created_at: "2026-02-10T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "appt-008",
    pet_id: "pet-006",
    pet: mockPets[5],
    vet_id: "mock-vet-001",
    vet: mockStaffList[1],
    date: "2026-02-08",
    time: "11:00",
    reason: "Vaccination",
    status: "cancelled",
    created_at: "2026-02-01T00:00:00Z",
    updated_at: "2026-02-07T00:00:00Z",
  },
];

// ============= Mock Invoices =============

export const mockInvoices: Invoice[] = [
  {
    id: "inv-001",
    invoice_number: "INV-2026-001",
    pet_id: "pet-001",
    pet: mockPets[0],
    owner_id: "owner-001",
    owner: mockOwners[0],
    line_items: [
      { description: "Annual Vaccination", quantity: 1, unit_price: 1500, total: 1500 },
      { description: "General Checkup", quantity: 1, unit_price: 800, total: 800 },
    ],
    subtotal: 2300,
    total: 2300,
    status: "pending",
    due_date: "2026-02-20",
    created_at: "2026-02-10T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "inv-002",
    invoice_number: "INV-2026-002",
    pet_id: "pet-003",
    pet: mockPets[2],
    owner_id: "owner-002",
    owner: mockOwners[1],
    line_items: [
      { description: "Skin Treatment", quantity: 1, unit_price: 2000, total: 2000 },
      { description: "Medicated Shampoo", quantity: 2, unit_price: 350, total: 700 },
    ],
    subtotal: 2700,
    discount: 200,
    total: 2500,
    status: "paid",
    due_date: "2026-02-05",
    payment_method: "UPI",
    created_at: "2026-01-28T00:00:00Z",
    updated_at: "2026-02-05T00:00:00Z",
  },
  {
    id: "inv-003",
    invoice_number: "INV-2026-003",
    pet_id: "pet-004",
    pet: mockPets[3],
    owner_id: "owner-003",
    owner: mockOwners[2],
    line_items: [
      { description: "X-Ray", quantity: 2, unit_price: 1200, total: 2400 },
      { description: "Joint Supplements (30 days)", quantity: 1, unit_price: 900, total: 900 },
      { description: "Consultation", quantity: 1, unit_price: 800, total: 800 },
    ],
    subtotal: 4100,
    total: 4100,
    status: "overdue",
    due_date: "2026-01-30",
    created_at: "2026-01-15T00:00:00Z",
    updated_at: "2026-01-30T00:00:00Z",
  },
  {
    id: "inv-004",
    invoice_number: "INV-2026-004",
    pet_id: "pet-007",
    pet: mockPets[6],
    owner_id: "owner-004",
    owner: mockOwners[3],
    line_items: [
      { description: "Dental Cleaning", quantity: 1, unit_price: 3000, total: 3000 },
    ],
    subtotal: 3000,
    total: 3000,
    status: "pending",
    due_date: "2026-02-25",
    created_at: "2026-02-12T00:00:00Z",
    updated_at: "2026-02-12T00:00:00Z",
  },
  {
    id: "inv-005",
    invoice_number: "INV-2026-005",
    pet_id: "pet-008",
    pet: mockPets[7],
    owner_id: "owner-005",
    owner: mockOwners[4],
    line_items: [
      { description: "Surgery (ACL Repair)", quantity: 1, unit_price: 15000, total: 15000 },
      { description: "Anesthesia", quantity: 1, unit_price: 3000, total: 3000 },
      { description: "Post-Op Medications", quantity: 1, unit_price: 1200, total: 1200 },
    ],
    subtotal: 19200,
    discount: 1200,
    total: 18000,
    status: "paid",
    due_date: "2026-02-01",
    payment_method: "Card",
    created_at: "2026-01-20T00:00:00Z",
    updated_at: "2026-02-01T00:00:00Z",
  },
];

// ============= Mock Inventory =============

export const mockInventory: InventoryItem[] = [
  {
    id: "item-001",
    name: "Rabies Vaccine",
    category: "Vaccines",
    quantity: 45,
    reorder_level: 20,
    unit_price: 450,
    supplier: "VetPharma India",
    expiry_date: "2027-06-30",
    status: "ok",
    created_at: "2025-06-01T00:00:00Z",
    updated_at: "2026-02-01T00:00:00Z",
  },
  {
    id: "item-002",
    name: "Amoxicillin 250mg",
    category: "Antibiotics",
    quantity: 8,
    reorder_level: 15,
    unit_price: 120,
    supplier: "MedVet Supplies",
    expiry_date: "2026-12-31",
    status: "low",
    created_at: "2025-04-01T00:00:00Z",
    updated_at: "2026-02-10T00:00:00Z",
  },
  {
    id: "item-003",
    name: "Surgical Gloves (Box)",
    category: "Supplies",
    quantity: 3,
    reorder_level: 10,
    unit_price: 350,
    supplier: "MedEquip Co",
    status: "low",
    created_at: "2025-03-01T00:00:00Z",
    updated_at: "2026-02-12T00:00:00Z",
  },
  {
    id: "item-004",
    name: "Flea & Tick Treatment",
    category: "Parasiticides",
    quantity: 0,
    reorder_level: 10,
    unit_price: 680,
    supplier: "VetPharma India",
    expiry_date: "2027-03-15",
    status: "out",
    created_at: "2025-05-01T00:00:00Z",
    updated_at: "2026-02-13T00:00:00Z",
  },
  {
    id: "item-005",
    name: "IV Fluid (Saline 500ml)",
    category: "Fluids",
    quantity: 25,
    reorder_level: 10,
    unit_price: 180,
    supplier: "MedEquip Co",
    expiry_date: "2027-09-30",
    status: "ok",
    created_at: "2025-07-01T00:00:00Z",
    updated_at: "2026-01-15T00:00:00Z",
  },
  {
    id: "item-006",
    name: "Bandage Roll (10cm)",
    category: "Supplies",
    quantity: 50,
    reorder_level: 20,
    unit_price: 45,
    supplier: "MedEquip Co",
    status: "ok",
    created_at: "2025-06-01T00:00:00Z",
    updated_at: "2026-02-01T00:00:00Z",
  },
  {
    id: "item-007",
    name: "Deworming Tablets",
    category: "Parasiticides",
    quantity: 5,
    reorder_level: 15,
    unit_price: 90,
    supplier: "VetPharma India",
    expiry_date: "2026-08-31",
    status: "low",
    created_at: "2025-04-15T00:00:00Z",
    updated_at: "2026-02-08T00:00:00Z",
  },
];

// ============= Dashboard Data =============

export const mockDashboardData: DashboardData = {
  todays_appointments: 5,
  pending_invoices: 2,
  total_pets: mockPets.length,
  total_owners: mockOwners.length,
  upcoming_appointments: mockAppointments.filter((a) => a.status === "scheduled").slice(0, 5),
  recent_invoices: mockInvoices.slice(0, 3),
  low_stock_items: mockInventory.filter((i) => i.status !== "ok"),
};

// ============= Helper for pagination =============

export function paginate<T>(items: T[], page = 1, perPage = 10): PaginatedResponse<T> {
  const start = (page - 1) * perPage;
  const paged = items.slice(start, start + perPage);
  return {
    items: paged,
    total: items.length,
    page,
    per_page: perPage,
    total_pages: Math.ceil(items.length / perPage),
  };
}
